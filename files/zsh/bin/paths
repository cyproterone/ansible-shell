#!/usr/bin/env bash

set -eu
set -o pipefail

OPTS='s'
LONG_OPTS='silent'

PARSED="$(getopt --options="$OPTS", --longoptions="$LONG_OPTS" --name="$0" -- "$@")"
eval set -- "$PARSED"

SILENT=0

while true
do
  case "$1" in
    -s|--silent)
      SILENT=1
      shift
      ;;
    --)
      shift
      break
      ;;
    *)
      >&2 echo 'ERR!'
      exit 2
      ;;
  esac
done
ARG_NUM=$#


print_err() {
  >&2 echo "$1"
  >&2 echo 'paths {show, add, remove, toggle} path'
}


check_arg() {
  if [[ $ARG_NUM -ne 2 ]]
  then
    print_err 'ERR! -- # of arguments'
    exit 2
  fi
}

show() {
  echo "$PATH"
  echo "$PATH" | tr ':' '\n' | awk '!seen[$0]++' >&2
}

add() {
  local target="$1"
}

remove() {
  local target="$1"
}

toggle() {
  local target="$1"
}


ACTION="$1"
case "$ACTION" in
  show)
    show
    ;;
  add)
    check_arg
    add "$2"
    ;;
  remove)
    check_arg
    remove "$2"
    ;;
  toggle)
    check_arg
    toggle "$2"
    ;;
  *)
    print_err 'ERR!'
    exit 2
    ;;
esac

