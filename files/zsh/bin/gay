#!/usr/bin/env bash

set -eu
set -o pipefail


read -ra SPREADS < <(seq 0.5 0.5 5)
SPREAD="${SPREADS[$(($RANDOM % ${#SPREADS[@]}))]}"

read -ra FREQUENCIES < <(seq 0.1 0.1 0.5)
FREQUENCY="${FREQUENCIES[$(($RANDOM % ${#FREQUENCIES[@]}))]}"


ARGS=(
  --force
  --duration=0
  --spread
  $SPREAD
  --freq
  $FREQUENCY
  )


if [[ -t 0 ]]
then
  TEXT="$*"
else
  TEXT="$(< /dev/stdin)"
fi


TEXT="${TEXT:-"Fully Automated Luxury Gay Space Communism"}"
exec lolcat "${ARGS[@]}" -- <<< "$TEXT"
