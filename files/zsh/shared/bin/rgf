#!/usr/bin/env bash

set -eu
set -o pipefail


ARGS=(
  "$@"
  --line-buffered
  --files-with-matches
  -0
  )


export SHELL=bash
export RGF_OPTIONS=(
  "$@"
  --color=always
  --context=2
  '--context-separator="$(hr "-" "$FZF_PREVIEW_COLUMNS")"'
  )


rg "${ARGS[@]}" | exec fzf --read0 --preview='rg ${RGF_OPTIONS[@]} {}'
